const mobileMenuBtn=document.getElementById("mobileMenuBtn"),mobileMenu=document.getElementById("mobileMenu");mobileMenuBtn.addEventListener("click",(()=>{mobileMenu.classList.toggle("active")}));const mobileLinks=document.querySelectorAll(".nav-link-mobile");function scrollToSection(e){const t=document.getElementById(e);if(t){const e=document.getElementById("header").offsetHeight,o=t.offsetTop-e;window.scrollTo({top:o,behavior:"smooth"})}}mobileLinks.forEach((e=>{e.addEventListener("click",(()=>{mobileMenu.classList.remove("active")}))}));const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")}))}),observerOptions),animatedElements=document.querySelectorAll(".feature-card, .product-card, .gallery-item, .contact-info-card");animatedElements.forEach((e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",observer.observe(e)})),window.addEventListener("scroll",(()=>{const e=document.getElementById("header");window.scrollY>50?e.style.background="rgba(252, 250, 248, 0.95)":e.style.background="rgba(252, 250, 248, 0.8)"}));const modalOverlay=document.getElementById("modalOverlay"),modalWindow=document.querySelector(".modal-window"),modalCloseBtn=document.getElementById("modalClose"),modalActionBtn=document.getElementById("modalBtn"),modalTitle=document.getElementById("modalTitle"),modalMessage=document.getElementById("modalMessage"),modalIcon=document.getElementById("modalIcon"),iconSuccess='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>',iconError='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>';function showModal(e,t,o){modalWindow.classList.remove("success","error"),modalTitle.textContent=t,modalMessage.textContent=o,"success"===e?(modalWindow.classList.add("success"),modalIcon.innerHTML=iconSuccess,modalActionBtn.textContent="Отлично"):(modalWindow.classList.add("error"),modalIcon.innerHTML=iconError,modalActionBtn.textContent="Закрыть"),modalOverlay.classList.add("active")}function closeModal(){modalOverlay.classList.remove("active")}modalCloseBtn.addEventListener("click",closeModal),modalActionBtn.addEventListener("click",closeModal),modalOverlay.addEventListener("click",(e=>{e.target===modalOverlay&&closeModal()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("contactForm"),t=document.getElementById("name"),o=document.getElementById("phone"),n=document.getElementById("email"),r=document.getElementById("message"),s=document.querySelector(".char-count");function l(e,t){const o=document.getElementById(e.name+"-error"),n=e.closest(".form-group");o.textContent=t,n.classList.add("error"),e.classList.add("error-input")}function c(e){const t=document.getElementById(e.name+"-error"),o=e.closest(".form-group");t.textContent="",o.classList.remove("error"),e.classList.remove("error-input")}function a(){const e=t.value.trim();return""===e?(l(t,"Пожалуйста, введите ваше имя."),!1):/^[\p{L}\s'-]+$/u.test(e)?e.length>50?(l(t,"Слишком длинное имя."),!1):(c(t),!0):(l(t,"Имя может содержать только буквы."),!1)}function i(){const e=o.value.trim();return""===e?(l(o,"Пожалуйста, введите телефон."),!1):/^[\d\s\+\-\(\)]{10,20}$/.test(e)?(c(o),!0):(l(o,"Введите корректный номер."),!1)}function d(){const e=n.value.trim();return""===e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(c(n),!0):(l(n,"Некорректный email."),!1)}function m(){const e=r.value.length;s.textContent=`${e} / 200`}t.addEventListener("input",(()=>{t.classList.contains("error-input")&&a()})),o.addEventListener("input",(()=>{o.classList.contains("error-input")&&i()})),n.addEventListener("input",(()=>{n.classList.contains("error-input")&&d()})),r.addEventListener("input",m),e.addEventListener("submit",(function(s){s.preventDefault();const l=a(),c=i(),u=d();if(l&&c&&u){const s=e.querySelector('button[type="submit"]'),l=s.textContent;s.disabled=!0,s.textContent="Отправка...";const c={name:t.value.trim(),phone:o.value.trim(),email:n.value.trim(),message:r.value.trim()};fetch("send-order.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((async t=>{const o=await t.json();if(!o.success)throw new Error(o.error||"Ошибка сервера");showModal("success","Заказ отправлен!","Спасибо! Мы свяжемся с вами в ближайшее время."),e.reset(),m(),document.querySelectorAll(".form-group").forEach((e=>e.classList.remove("error"))),document.querySelectorAll(".error-input").forEach((e=>e.classList.remove("error-input")))})).catch((e=>{showModal("error","Ошибка отправки","Не удалось отправить заказ. Попробуйте позже или позвоните нам.")})).finally((()=>{s.disabled=!1,s.textContent=l}))}})),m()}));